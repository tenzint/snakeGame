var b=Object.defineProperty;var p=(r,o,c)=>o in r?b(r,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[o]=c;var l=(r,o,c)=>(p(r,typeof o!="symbol"?o+"":o,c),c);import{d as _,r as f,o as I,a as S,c as E,w as F,v as H,u as v,b as s,i as P,t as w,F as L,p as A,e as B,f as m,g as z,h as N,j as O}from"./vendor.de1ca6d6.js";const W=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const n of h)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function c(h){const n={};return h.integrity&&(n.integrity=h.integrity),h.referrerpolicy&&(n.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?n.credentials="include":h.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(h){if(h.ep)return;h.ep=!0;const n=c(h);fetch(h.href,n)}};W();var q=(r,o)=>{const c=r.__vccOpts||r;for(const[d,h]of o)c[d]=h;return c};const k=r=>(A("data-v-5d877b5b"),r=r(),B(),r),D={class:"dialog"},G=k(()=>s("h1",{class:"dialog-title title"},"Snake Game",-1)),j=k(()=>s("ul",{class:"dialog-content"},[s("li",null," Move the snake around and eat food to grow to get as high a score as possible "),s("li",null,"The snake dies when it hits the border of the canvas or its own body"),s("li",null,"Control the snake's direction via the arrow keys"),s("li",null,[m(" Toggle the game state to pause"),s("strong",null,"/"),m("play via pressing the 'P' key or the Play"),s("strong",null,"/"),m("Pause button ")])],-1)),U=[G,j],$={class:"container"},K={class:"title-big"},J={class:"main"},Q=k(()=>s("h1",{class:"title text-shadow-white green-font"},"Snake Game",-1)),X={class:"title-small"},Y={class:"title-item"},Z=k(()=>s("strong",null,"SCORE:",-1)),V={class:"green-font"},tt={class:"title-item"},it=k(()=>s("strong",null,"HIGH SCORE:",-1)),et={class:"green-font"},st=_({setup(r){let o=f(null),c=f(null),d=f(null),h=f(""),n,u=f(0),x=f(!1),g=f(0);class M{constructor(t=20,i=window.innerWidth/20,e=window.innerHeight/20){l(this,"cRef");l(this,"ctx");l(this,"unit");l(this,"width");l(this,"height");l(this,"canvasColor");l(this,"color2");l(this,"snakeColor");l(this,"foodColor");l(this,"snake");l(this,"velocity");l(this,"timer");l(this,"food");l(this,"score");l(this,"playingMode");n=this,this.cRef=o.value,this.ctx=null,this.unit=t,this.width=i,this.height=e,this.canvasColor="rgba(128, 128, 128, 0.3)",this.color2="rgba(128, 128, 128, 0.5)",this.snakeColor="#1B5E20",this.foodColor="#ff0000",this.snake=[],this.velocity={x:1,y:0},this.timer=0,this.food={x:Math.random()*this.width,y:Math.random()*this.height},this.score=0,this.playingMode=!1,h.value="Pause"}setup(){return new Promise((t,i)=>{window.innerWidth>=1080?this.unit=40:window.innerWidth>=720?this.unit=30:this.unit=20,d.value.style.height=window.innerHeight-c.value.offsetHeight+"px";let e=1;return window.innerWidth>=600&&(e=.8),this.cRef.width=Math.floor(window.innerWidth*e/this.unit)*this.unit,this.cRef.height=Math.floor((window.innerHeight-c.value.offsetHeight-10)/this.unit)*this.unit,this.width=Math.floor(this.cRef.width/this.unit),this.height=Math.floor(this.cRef.height/this.unit),t()})}async restart(){g.value<u.value&&(g.value=u.value),this.cleanTimer(),this.playingMode=!1,h.value="Pause",await this.start()}async start(){await this.setup();let t=Math.floor(this.width/2),i=Math.floor(this.height/2);this.snake=[],this.velocity={x:1,y:0},this.food={x:Math.random()*this.width,y:Math.random()*this.height},this.snake.push({x:t,y:i}),this.snake.push({x:t-1,y:i}),this.snake.push({x:t-2,y:i}),this.snake.push({x:t-3,y:i}),this.updateScore(),this.randomizeFood(),this.draw()}cleanTimer(){clearInterval(this.timer)}togglePausePlay(){this.timer&&this.cleanTimer(),this.playingMode?(this.playingMode=!1,h.value="Pause"):(this.playingMode=!0,h.value="Play",this.timer=setInterval(()=>this.moveNext(),100))}updateScore(){this.score=this.snake.length*10-40,u.value=this.score}didSnakeEat(){return this.snake[0].x===this.food.x&&this.snake[0].y===this.food.y?(this.randomizeFood(),this.updateScore(),!0):!1}checkForMistakes(){if(this.snake[0].x<0||this.snake[0].x>=this.width||this.snake[0].y<0||this.snake[0].y>=this.height){this.restart();return}this.snake.forEach(t=>{if(this.snake[0]!==t&&this.snake[0].x===t.x&&this.snake[0].y===t.y){this.restart();return}})}moveNext(){let t={x:this.snake[0].x,y:this.snake[0].y};t.x+=this.velocity.x,t.y+=this.velocity.y,this.snake.unshift(t),this.checkForMistakes(),this.didSnakeEat()||this.snake.pop(),this.draw()}moveLeft(){this.snake[0].x-this.snake[1].x==0&&(this.velocity={x:-1,y:0})}moveRight(){this.snake[0].x-this.snake[1].x==0&&(this.velocity={x:1,y:0})}moveUp(){this.snake[0].y-this.snake[1].y==0&&(this.velocity={x:0,y:-1})}moveDown(){this.snake[0].y-this.snake[1].y==0&&(this.velocity={x:0,y:1})}randomizeFood(){this.food={x:Math.floor(Math.random()*this.width),y:Math.floor(Math.random()*this.height)},this.snake.forEach(t=>{t.x===this.food.x&&t.y===this.food.y&&this.randomizeFood()})}draw(){var t;this.ctx=this.cRef.getContext("2d"),(t=this.ctx)==null||t.clearRect(0,0,this.width*this.unit,this.height*this.unit),this.ctx.fillStyle=this.color2,this.ctx.fillRect(0,0,this.width*this.unit,this.height*this.unit),this.ctx.fillStyle=this.canvasColor;for(let i=0;i<this.width;i+=1)for(let e=0;e<this.height;e+=1)(i%2==0&&e%2==1||i%2==1&&e%2==0)&&this.ctx.fillRect(i*this.unit,e*this.unit,this.unit,this.unit);this.drawSnake(),this.drawFood()}drawSnake(){this.ctx.beginPath(),this.ctx.fillStyle=this.snakeColor;let t={x:0,y:0},i={x:0,y:0};this.snake.forEach((e,a)=>{a===0?(t.x=this.velocity.x,t.y=this.velocity.y,this.drawSnakeHead(e,t)):a===this.snake.length-1?(t.x=this.snake[a-1].x-this.snake[a].x,t.y=this.snake[a-1].y-this.snake[a].y,this.drawSnakeTail(e,t)):(t.x=this.snake[a-1].x-this.snake[a].x,t.y=this.snake[a-1].y-this.snake[a].y,i.x=this.snake[a].x-this.snake[a+1].x,i.y=this.snake[a].y-this.snake[a+1].y,i.x===t.x&&t.y===i.y?this.drawSnakeBody(e,t):this.drawCurvedSnake(e,t,i))}),this.ctx.closePath()}rotateSnakePart(t,i){this.ctx.translate((t.x+.5)*this.unit,(t.y+.5)*this.unit);let e=0;i.x===1&&i.y===0?e=0:i.x===-1&&i.y===0?e=Math.PI:i.x===0&&i.y===1?e=Math.PI*.5:i.x===0&&i.y===-1&&(e=Math.PI*1.5),this.ctx.rotate(e),this.ctx.translate(-1*(t.x+.5)*this.unit,-1*(t.y+.5)*this.unit)}drawSnakeHead(t,i){this.ctx.save(),this.rotateSnakePart(t,i),this.ctx.fillStyle=this.snakeColor,this.ctx.beginPath(),this.ctx.moveTo(t.x*this.unit,(t.y+.2)*this.unit),this.ctx.lineTo((t.x+.2)*this.unit,t.y*this.unit),this.ctx.lineTo((t.x+1)*this.unit,(t.y+.3)*this.unit),this.ctx.lineTo((t.x+1)*this.unit,(t.y+.7)*this.unit),this.ctx.lineTo((t.x+.2)*this.unit,(t.y+1)*this.unit),this.ctx.lineTo(t.x*this.unit,(t.y+.8)*this.unit),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="#777700",this.ctx.beginPath(),this.ctx.arc((t.x+.7)*this.unit,(t.y+.3)*this.unit,this.unit*.15,0,2*Math.PI),this.ctx.arc((t.x+.7)*this.unit,(t.y+.7)*this.unit,this.unit*.15,0,2*Math.PI),this.ctx.fill(),this.ctx.restore()}drawSnakeTail(t,i){this.ctx.save(),this.rotateSnakePart(t,i),this.ctx.fillStyle=this.snakeColor,this.ctx.beginPath(),this.ctx.moveTo(t.x*this.unit,(t.y+.5)*this.unit),this.ctx.lineTo((t.x+1)*this.unit,(t.y+.2)*this.unit),this.ctx.lineTo((t.x+1)*this.unit,(t.y+.8)*this.unit),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}drawCurvedSnake(t,i,e){let a=!0;e.x===1&&i.y===-1||e.x===-1&&i.y===1||e.y===1&&i.x===1||e.y===-1&&i.x===-1?a=!0:a=!1,this.ctx.save(),this.rotateSnakePart(t,e),this.ctx.fillStyle=this.snakeColor,this.ctx.beginPath(),a?(this.ctx.moveTo(t.x*this.unit,(t.y+.2)*this.unit),this.ctx.quadraticCurveTo((t.x+.5)*this.unit,(t.y+.5)*this.unit,(t.x+.2)*this.unit,t.y*this.unit),this.ctx.lineTo((t.x+.8)*this.unit,t.y*this.unit),this.ctx.quadraticCurveTo((t.x+1)*this.unit,(t.y+1)*this.unit,t.x*this.unit,(t.y+.8)*this.unit)):(this.ctx.moveTo(t.x*this.unit,(t.y+.8)*this.unit),this.ctx.quadraticCurveTo((t.x+.5)*this.unit,(t.y+.5)*this.unit,(t.x+.2)*this.unit,(t.y+1)*this.unit),this.ctx.lineTo((t.x+.8)*this.unit,(t.y+1)*this.unit),this.ctx.quadraticCurveTo((t.x+1)*this.unit,t.y*this.unit,t.x*this.unit,(t.y+.2)*this.unit)),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}drawSnakeBody(t,i){this.ctx.save(),this.rotateSnakePart(t,i),this.ctx.fillStyle=this.snakeColor,this.ctx.beginPath(),this.ctx.moveTo(t.x*this.unit,(t.y+.2)*this.unit),this.ctx.bezierCurveTo((t.x+.3)*this.unit,(t.y+.4)*this.unit,(t.x+.6)*this.unit,(t.y-.1)*this.unit,(t.x+1)*this.unit,(t.y+.2)*this.unit),this.ctx.lineTo((t.x+1)*this.unit,(t.y+.8)*this.unit),this.ctx.bezierCurveTo((t.x+.6)*this.unit,(t.y+.6)*this.unit,(t.x+.3)*this.unit,(t.y+1)*this.unit,t.x*this.unit,(t.y+.8)*this.unit),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}drawFood(){this.ctx.globalAlpha=.8;let t=this.ctx.createRadialGradient((this.food.x+.4)*this.unit,(this.food.y+.4)*this.unit,0,(this.food.x+.5)*this.unit,(this.food.y+.5)*this.unit,this.unit);t.addColorStop(0,"#aaaa00"),t.addColorStop(.1,"#999922"),t.addColorStop(.1,"#777733"),t.addColorStop(.2,"#441505"),t.addColorStop(.4,"#880101"),t.addColorStop(.9,"#cc0000"),t.addColorStop(1,this.foodColor),this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.arc((this.food.x+.5)*this.unit,(this.food.y+.5)*this.unit,this.unit*.3,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill()}arrowPressed(t){t.code==="KeyP"&&n.togglePausePlay(),n.playingMode&&(t.code==="ArrowUp"?n.moveUp():t.code==="ArrowDown"?n.moveDown():t.code==="ArrowLeft"?n.moveLeft():t.code==="ArrowRight"&&n.moveRight())}}let y;I(()=>{y=new M,document.addEventListener("keydown",y.arrowPressed),y.start().then(()=>{y.start()}),u.value=y.score});const T=()=>y.togglePausePlay();return(R,t)=>(S(),E(L,null,[F(s("div",D,U,512),[[H,v(x)]]),s("div",$,[s("div",{class:"title-container",ref_key:"titleRef",ref:c},[s("div",K,[s("span",J,[Q,s("span",{class:"howto",onClick:t[0]||(t[0]=i=>P(x)?x.value=!0:x=!0)},"How to play")]),s("button",{class:"button title-left",onClick:T},w(v(h)),1)]),s("div",X,[s("span",Y,[Z,s("span",V,w(v(u)),1)]),s("span",tt,[it,s("span",et,w(v(g)),1)])])],512),s("div",{class:"canvas-container",ref_key:"containerRef",ref:d,onClick:t[1]||(t[1]=i=>P(x)?x.value=!1:x=!1)},[s("canvas",{id:"snakeCanvas",ref_key:"canvasRef",ref:o},null,512)],512)])],64))}});var ht=q(st,[["__scopeId","data-v-5d877b5b"]]);const nt=_({setup(r){return(o,c)=>(S(),z(ht))}}),C=N(nt);C.use(O);C.mount("#app");
